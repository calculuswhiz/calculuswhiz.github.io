var z=Object.defineProperty;var S=(s,t,e)=>t in s?z(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var h=(s,t,e)=>(S(s,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();const v=6,g=5;function*A(s){const t=[...s].sort((e,r)=>r-e);for(let e=0;e<v;e++)for(let r=0;r<v;r++)e!==r&&(yield[t[e],t[r]])}class f{constructor(t,e,r){h(this,"children",new Array);h(this,"score");this.digits=t,this.currentMoves=e,this.value=r;const n=new Set;for(const o of e.split(";").slice(0,3).map(l=>l[0]))n.add(o);this.score=n.size**2*(e.length-1)}buildChildNodes(t){if(!(this.digits.size===1||t===0)){for(const[e,r]of A(this.digits)){const n=new Set(this.digits);if(n.delete(e),n.delete(r),e<=r){const a=new Set(n);if(a.add(e+r),this.children.push(new f(a,this.currentMoves+`+ ${e} ${r};`,e+r)),e*r!==1){const p=new Set(n);p.add(e*r),this.children.push(new f(p,this.currentMoves+`* ${e} ${r};`,e*r))}}const o=new Set(n);e-r>0&&(o.add(e-r),this.children.push(new f(o,this.currentMoves+`- ${e} ${r};`,e-r)));const l=new Set(n);Number.isInteger(e/r)&&r!==1&&(l.add(e/r),this.children.push(new f(l,this.currentMoves+`/ ${e} ${r};`,e/r)))}for(const e of this.children)e.buildChildNodes(t-1)}}}function E(s){s>g&&(s=g);const t=new Array;for(let c=1;c<=25;c++)t.splice((t.length+1)*Math.random(),0,c);const e=new Set(t.slice(0,v)),r=new f(e,"",void 0);r.buildChildNodes(3);const n=new Map;function o(c,u){let d=n.get(c);d===void 0&&(d=[],n.set(c,d)),d.push(u)}const l=[r];for(;l.length>0;){const c=l.shift();for(const u of(c==null?void 0:c.children)??[])o(u.value??0,u.score),l.push(u)}const a=new Map;for(const[c,u]of n)a.set(c,u.reduce((d,y)=>d*y)**(1/u.length));const p=[...a].sort((c,u)=>u[1]-c[1]);return{digits:[...e].sort((c,u)=>c-u),winningValue:p[p.length/g*(s-1+Math.random())|0][0],tree:r,scores:a}}const N={"+":(s,t)=>s+t,"-":(s,t)=>s-t,"*":(s,t)=>s*t,"/":(s,t)=>s/t};class m{constructor(){h(this,"operator",null);h(this,"a",null);h(this,"b",null)}getResult(){if(this.operator===null||this.a===null||this.b===null)throw Error("Invalid operation");return N[this.operator](this.a,this.b)}clear(){this.a=null,this.b=null,this.operator=null}}const i={puzzle:void 0,moves:new Array,currentMove:new m,unselectAll(){var s;for(const t of document.querySelectorAll(".selected"))t.setAttribute("class",((s=t.getAttribute("class"))==null?void 0:s.replace("selected",""))??"");this.currentMove=new m},evaluateMove(s){var t,e;if(this.currentMove.operator!==null&&this.currentMove.a!==null&&this.currentMove.b!==null){const r=this.currentMove.getResult();if(!Number.isInteger(r)||r<=0){this.unselectAll();return}s||this.moves.push(this.currentMove),(t=document.querySelector(`.digit-input[data-value='${this.currentMove.a}']`))==null||t.remove();const n=document.querySelector(`.digit-input[data-value='${this.currentMove.b}']`);n.textContent=r.toString(),n.dataset.value=n.textContent,this.unselectAll(),n.textContent===(((e=this.puzzle)==null?void 0:e.winningValue.toString())??"")&&alert("Puzzle cleared.")}},makeDigitButton(s){const t=document.createElement("div");return t.setAttribute("class","digit-input input-button"),t.textContent=s.toString(),t.dataset.value=s.toString(),t.addEventListener("click",e=>{const r=e.target,n=Number.parseInt(r.textContent??"0"),o=r.getAttribute("class");if((o==null?void 0:o.includes("selected"))??!1){r.setAttribute("class",(o==null?void 0:o.replace("selected",""))??""),this.currentMove.a===n?this.currentMove.a=null:this.currentMove.b===n&&(this.currentMove.b=null);return}this.currentMove.a===null?this.currentMove.a=n:this.currentMove.b=n,r.setAttribute("class",`${o} selected`),this.evaluateMove(!1)}),t},resetDigits(){const s=document.getElementById("usable-digits");if(s==null)throw Error("No place for digits");if(s.innerHTML="",this.puzzle==null)throw Error("No puzzle generated");for(const t of this.puzzle.digits)s.appendChild(this.makeDigitButton(t))},generateGame(s){this.puzzle=E(s),this.resetDigits()}};let b;do b=parseInt(prompt(`Please input a difficulty (out of ${g})`,"1")??"1");while(Number.isNaN(b));i.generateGame(b);if(i.puzzle==null)throw Error("No puzzle generated.");document.getElementById("target-number").textContent=i.puzzle.winningValue.toString()??"";const $=["add-btn","sub-btn","mul-btn","div-btn"];for(const s of $)document.getElementById(s).addEventListener("click",t=>{var l;const e=t.target,r=e.dataset.opChar,n=e.getAttribute("class");if(i.currentMove.operator!==null){const a=document.querySelector(`div.selected[data-op-char='${i.currentMove.operator}']`);if(a.setAttribute("class",((l=a.getAttribute("class"))==null?void 0:l.replace("selected",""))??""),e===a){i.currentMove.operator=null;return}}e.setAttribute("class",`${n} selected`),i.currentMove.operator=r,i.evaluateMove(!1)});var w;(w=document.getElementById("undo-btn"))==null||w.addEventListener("click",s=>{if(i.unselectAll(),i.moves.length!==0){i.resetDigits(),i.moves.pop();for(const t of i.moves)i.currentMove=t,i.evaluateMove(!0);i.currentMove=new m}});var M;(M=document.getElementById("view-solution-btn"))==null||M.addEventListener("click",s=>{if(i.puzzle==null)throw Error("No puzzle generated.");if(confirm("View one possible shortest solution?")){const t=[i.puzzle.tree];for(;t.length>0;){const e=t.shift();for(const r of(e==null?void 0:e.children)??[]){if(r.value===i.puzzle.winningValue){alert(`One possible solution: ${r.currentMoves.replace(/;/g,`
`)}`);return}t.push(r)}}alert("Nothing found...?")}});document.body.style.display="";
